# –ü–æ–±—É–¥–æ–≤–∞ –≤–∏—Å–æ–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—ó

–ö—É—Ä—Å–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –≥—Ä—É–ø–∏ –Ü–¢–ü–ê-11 **–î–æ—Ä–æ–∂–æ–≤—Ü—è –í. –í.**.
–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –º—ñ—Å—Ç–∏—Ç—å –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ–≥–æ –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –Ω–∞ Flask —É –∫–ª–∞—Å—Ç–µ—Ä—ñ Kubernetes.

## üéØ –ú–µ—Ç–∞ –ø—Ä–æ—î–∫—Ç—É

–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –≤–∏—Å–æ–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Kubernetes. –û—Å–Ω–æ–≤–Ω–∞ —É–≤–∞–≥–∞ –ø—Ä–∏–¥—ñ–ª—è—î—Ç—å—Å—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—é –∫–ª–∞—Å—Ç–µ—Ä–∞, —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—é —Å–µ—Ä–≤—ñ—Å—É —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—é –π–æ–≥–æ —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ –¥–æ –∑–±–æ—ó–≤ —Ç–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

* **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è:** Kubernetes 
* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è:** Docker, containerd 
* **–û–°:** Ubuntu Server 24.04.2 LTS 
* **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** Flask 
* **–ú–µ—Ä–µ–∂–µ–≤–∏–π –ø–ª–∞–≥—ñ–Ω:** Flannel 
* **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è HPA:** Metrics Server 
* **–í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è:** VirtualBox 

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
- k8s/                  - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏ Kubernetes
    - deployment.yaml   - –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è Flask-–¥–æ–¥–∞—Ç–∫—É –∑ –ª—ñ–º—ñ—Ç–∞–º–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤
    - service.yaml      - –°–µ—Ä–≤—ñ—Å NodePort –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–æ–¥–∞—Ç–∫—É
    - pdb.yaml          - PodDisruptionBudget –¥–ª—è –≤–∏—Å–æ–∫–æ—ó –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ
- my_app/               - –í–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –≤–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
    - app.py            - –ü—Ä–æ—Å—Ç–∏–π Flask-–¥–æ–¥–∞—Ç–æ–∫
    - requirements.txt  - –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
    - Dockerfile        - –§–∞–π–ª –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker-–æ–±—Ä–∞–∑—É
- README.md             - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É

## üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

1.  –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç—Ä–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ –º–∞—à–∏–Ω–∏ (1 `master`, 2 `slave`) –Ω–∞ VirtualBox –∑ —Ç–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
    * –û–°: Ubuntu Server 24.04.2 LTS 
    * RAM: 2 –ì–ë 
    * CPU: 2 —è–¥—Ä–∞ 
    * –î–∏—Å–∫: 25 –ì–ë 
    * –ú–µ—Ä–µ–∂–∞: Bridged Adapter 
2.  –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–Ω—ñ IP-–∞–¥—Ä–µ—Å–∏ —Ç–∞ `/etc/hosts` –Ω–∞ –∫–æ–∂–Ω–æ–º—É –≤—É–∑–ª—ñ.
3.  –í–∏–º–∫–Ω—ñ—Ç—å swap –Ω–∞ –≤—Å—ñ—Ö –≤—É–∑–ª–∞—Ö.
4.  –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–æ—Ä—Ç–∏ –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä–∞ `ufw` –¥–ª—è master —Ç–∞ slave –≤—É–∑–ª—ñ–≤.

### –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Kubernetes

1.  –ù–∞ –≤—Å—ñ—Ö –≤—É–∑–ª–∞—Ö –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `docker-ce`, `containerd`, `kubelet`, `kubeadm`, `kubectl`.
2.  –ù–∞–ª–∞—à—Ç—É–π—Ç–µ `containerd` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `SystemdCgroup`.
3.  –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —è–¥—Ä–∞ –¥–ª—è Kubernetes (`net.bridge.bridge-nf-call-iptables`, `net.ipv4.ip_forward`).

### –ö—Ä–æ–∫ 3: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–ª–∞—Å—Ç–µ—Ä–∞

1.  –ù–∞ **master** –≤—É–∑–ª—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä:
    ```bash
    sudo kubeadm init --apiserver-advertise-address=<IP_–ú–ê–°–¢–ï–†–ê> --pod-network-cidr=10.244.0.0/16
    ```
2.  –ù–∞–ª–∞—à—Ç—É–π—Ç–µ `kubectl` –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
3.  –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –º–µ—Ä–µ–∂–µ–≤–∏–π –ø–ª–∞–≥—ñ–Ω Flannel:
    ```bash
    kubectl apply -f [https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml](https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml)
    ```
4.  –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è —Ä–æ–±–æ—á–∏—Ö –≤—É–∑–ª—ñ–≤ —Ç–∞ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å **slave** –≤—É–∑–ª–∏ –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ—Ç—Ä–∏–º–∞–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏ `kubeadm join`.

### –ö—Ä–æ–∫ 4: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

1.  **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker-–æ–±—Ä–∞–∑—É**. –ù–∞ **master** –≤—É–∑–ª—ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ø–∞–ø–∫–∏ `my_app`.
    ```bash
    # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–∞–∑—É
    docker build -t my-flask-app:latest . 

    # –í—Ö—ñ–¥ —É Docker Hub
    docker login

    # –¢–µ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –æ–±—Ä–∞–∑—É
    docker tag my-flask-app:latest volodymyrdorozhovets/coursework:latest 
    docker push volodymyrdorozhovets/coursework:latest 
    ```
2.  **–î–µ–ø–ª–æ–π –≤ Kubernetes**. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ø–∞–ø–∫–∏ `k8s` —Ç–∞ –∑–∞—Å—Ç–æ—Å—É–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:
    ```bash
    kubectl apply -f deployment.yaml 
    kubectl apply -f service.yaml 
    ```
3.  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å:
    ```bash
    kubectl get pods -o wide
    kubectl get services
    ```
    –î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é `http://<IP_–í–£–ó–õ–ê>:30007`.

### –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∏—Å–æ–∫–æ—ó –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

1.  **Horizontal Pod Autoscaler (HPA)**.
    * –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Metrics Server:
        ```bash
        kubectl apply -f [https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml](https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml)
        ```
    * –í–Ω–µ—Å—ñ—Ç—å –∑–º—ñ–Ω–∏ –≤ `deployment` Metrics Server –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ `kubelet-insecure-tls`.
    * –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–≤—Ç–æ—Å–∫–µ–π–ª—ñ–Ω–≥ –¥–ª—è –≤–∞—à–æ–≥–æ `deployment`:
        ```bash
        kubectl autoscale deployment flask-app --cpu-percent=50 --min=3 --max=10 
        ```
2.  **PodDisruptionBudget (PDB)**.
    * –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ PDB –¥–ª—è –≥–∞—Ä–∞–Ω—Ç—ñ—ó –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–æ–¥—ñ–≤:
        ```bash
        kubectl apply -f pdb.yaml 
        ```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü–∏—Ö –∫—Ä–æ–∫—ñ–≤ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –≤–∏—Å–æ–∫–æ –¥–æ—Å—Ç—É–ø–Ω—É —Ç–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—É —Å–∏—Å—Ç–µ–º—É –Ω–∞ –±–∞–∑—ñ Kubernetes. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ CPU  —Ç–∞ —Å—Ç—ñ–π–∫–∞ –¥–æ –ø–ª–∞–Ω–æ–≤–∏—Ö –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –≤—É–∑–ª—ñ–≤ –∑–∞–≤–¥—è–∫–∏ PDB.
